<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Inventory System | åº“å­˜ç›˜ç‚¹ç³»ç»Ÿ</title>
    <link rel="icon" href="data:,">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <style>
        /* è¯­è¨€åˆ‡æ¢æ ·å¼ */
        body {
            background-color: #f5f5f5;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* ç»Ÿä¸€æ–‡æœ¬é«˜åº¦å’Œå¯¹é½æ–¹å¼ */
        span.lang-zh,
        span.lang-en {
            display: inline-block;
            line-height: 1.5;  /* ç»Ÿä¸€è¡Œé«˜ */
            height: 1.5em;     /* ç»Ÿä¸€é«˜åº¦ */
            vertical-align: middle;
        }
        
        h1 span.lang-zh,
        h1 span.lang-en {
            height: 1.2em;
            line-height: 1.2;
        }
        
        h2 span.lang-zh,
        h2 span.lang-en {
            height: 1.3em;
            line-height: 1.3;
        }
        
        h3 span.lang-zh,
        h3 span.lang-en {
            height: 1.4em;
            line-height: 1.4;
        }
        
        /* ç¡®ä¿æŒ‰é’®å†…çš„æ–‡æœ¬å‚ç›´å±…ä¸­ */
        button span.lang-zh,
        button span.lang-en {
            height: 1.2em;
            line-height: 1.2;
            vertical-align: middle;
        }
        
        /* æ ‡ç­¾å†…çš„æ–‡æœ¬å¯¹é½ */
        label span.lang-zh,
        label span.lang-en {
            display: inline-block;
            height: 1.2em;
            line-height: 1.2;
            vertical-align: middle;
        }

        /* é˜²æ­¢è¯­è¨€åˆ‡æ¢æ—¶é¡µé¢æŠ–åŠ¨ */
        .container {
            min-height: 600px;  /* è®¾ç½®æœ€å°é«˜åº¦ */
        }

        h1, h2, h3 {
            min-height: 1.2em;  /* ç¡®ä¿æ ‡é¢˜é«˜åº¦ä¸€è‡´ */
            display: flex;      /* ä½¿ç”¨ flex å¸ƒå±€ç¡®ä¿å†…å®¹å‚ç›´å±…ä¸­ */
            align-items: center;
        }

        label {
            min-width: 120px;  /* ç¡®ä¿æ ‡ç­¾å®½åº¦ä¸€è‡´ */
            display: flex;      /* ä½¿ç”¨ flex å¸ƒå±€ç¡®ä¿å†…å®¹å‚ç›´å±…ä¸­ */
            align-items: center;
        }

        .result-div {
            min-height: 50px;  /* ç¡®ä¿ç»“æœåŒºåŸŸé«˜åº¦ä¸€è‡´ */
        }

        /* ç¡®ä¿æŒ‰é’®å®½åº¦ä¸€è‡´ */
        button {
            min-width: 80px;
        }

        /* ç¡®ä¿è¾“å…¥æ¡†å®½åº¦ä¸€è‡´ */
        .search-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .search-input-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .lang-zh .lang-en {
            display: none;
        }
        .lang-en .lang-zh {
            display: none;
        }

        .container { 
            max-width: 800px; 
            margin: 0 auto; 
            padding: 20px;
            background-color: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            margin-top: 20px;
        }
        .tab-content {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: white;
        }
        form div {
            margin: 10px 0;
        }
        label {
            display: inline-block;
            width: 120px;
            margin-right: 10px;
            color: #555;
        }
        input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            width: 200px;
            transition: border-color 0.3s;
        }
        input:focus {
            outline: none;
            border-color: #4CAF50;
            box-shadow: 0 0 5px rgba(76,175,80,0.2);
        }
        input::placeholder {
            color: #999;
            font-style: italic;
        }
        button {
            padding: 8px 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-weight: 500;
        }
        button:hover {
            background-color: #45a049;
        }
        h1, h2, h3 {
            color: #333;
            margin-bottom: 20px;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }
        h2 {
            color: #2c3e50;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
        }
        
        .input-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            position: relative;
        }
        
        .input-header h2 {
            margin-bottom: 0;
            border-bottom: none;
            padding-bottom: 0;
        }
        
        .input-header .submit-button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s;
            position: absolute;
            right: 0;
        }
        
        .input-header .submit-button:hover {
            background-color: #45a049;
        }
        
        h3 {
            color: #34495e;
            margin-top: 25px;
        }
        .result-div {
            margin-top: 10px;
            padding: 10px;
            border: 1px solid #eee;
            border-radius: 3px;
            min-height: 30px;
            background-color: #f8f9fa;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }
        .tab-container {
            margin-bottom: 20px;
        }
        .tab-buttons {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 1px;
        }
        .tab-button {
            padding: 10px 20px;
            border: none;
            background: #f8f9fa;
            cursor: pointer;
            margin-right: 5px;
            border-radius: 5px 5px 0 0;
            font-weight: 500;
            color: #666;
            transition: all 0.3s;
        }
        .tab-button.active {
            background: #4CAF50;
            color: white;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
        }
        .tab-button:hover:not(.active) {
            background: #e9ecef;
            color: #333;
        }
        .tab-content {
            display: none;
            padding: 20px;
            background-color: #f9f9f9;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-top: -1px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .tab-content.active {
            display: block;
        }
        .language-switch {
            position: absolute;
            top: 20px;
            right: 20px;
        }
        .language-switch button {
            padding: 5px 10px;
            margin-left: 5px;
            background-color: transparent;
            color: #4CAF50;
            border: 1px solid #4CAF50;
            border-radius: 3px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .language-switch button:hover {
            background-color: #4CAF50;
            color: white;
        }
        .language-switch button.active {
            background-color: #4CAF50;
            color: white;
        }
        /* æŸ¥è¯¢ç»“æœæ ·å¼ */
        .result-div div {
            padding: 8px;
            border-bottom: 1px solid #eee;
        }
        .result-div div:last-child {
            border-bottom: none;
        }
        /* è¾“å…¥åŒºåŸŸçš„é—´è· */
        .search-group {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        .search-group:last-child {
            border-bottom: none;
        }

        /* è¾“å…¥ç•Œé¢çš„æ ·å¼æ”¹è¿› */
        #input-tab input {
            font-size: 1.2em;
            padding: 12px 16px;
            width: 300px;
        }
        
        #input-tab label {
            font-size: 1.2em;
            min-width: 150px;
        }
        
        #input-tab button[type="submit"] {
            font-size: 1.2em;
            padding: 12px 24px;
            margin-top: 15px;
            width: 200px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        /* æäº¤æŒ‰é’®æ ·å¼ */
        .submit-button {
            font-size: 1.2em;
            padding: 15px 30px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            width: 100%;
            max-width: 200px;
        }

        .submit-button:hover {
            background-color: #218838;
        }
        
        #input-tab form div {
            margin: 12px 0;
        }

        /* è¾“å…¥éƒ¨åˆ†æ ·å¼ */
        .input-section {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        .section-title {
            margin: 0 0 15px 0;
            padding-bottom: 8px;
            border-bottom: 2px solid #dee2e6;
            color: #495057;
            font-size: 1.1em;
            font-weight: 600;
        }

        .input-section:last-of-type {
            margin-bottom: 20px;
        }

        .input-section:hover {
            border-color: #adb5bd;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        /* æ°´å¹³å¸ƒå±€å®¹å™¨ */
        .input-sections-container {
            display: flex;
            gap: 25px;
            margin-bottom: 30px;
        }

        .input-section {
            flex: 1;
            min-width: 0; /* é˜²æ­¢flexé¡¹ç›®æº¢å‡º */
        }

        /* BTéƒ¨åˆ†ç‰¹æ®Šæ ·å¼ */
        .container-section {
            margin-bottom: 25px;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .input-sections-container {
                flex-direction: column;
                gap: 10px;
            }
            
            .input-section {
                margin-bottom: 10px;
            }
        }
        
        /* æŸ¥è¯¢ç»“æœæ ·å¼æ”¹è¿› */
        .result-item {
            padding: 20px;
            border-bottom: 1px solid #eee;
            font-size: 1.1em;
            margin-bottom: 15px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        /* å•†å“å¡ç‰‡æ ·å¼ */
        .item-card {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .item-header {
            font-size: 1.2em;
            margin-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }
        
        .box-details-container {
            margin-top: 10px;
            margin-left: 20px;
        }
        
        .box-detail-line {
            margin: 5px 0;
            color: #666;
        }
        
        /* è¯­è¨€æ˜¾ç¤ºæ§åˆ¶ */
        body.lang-zh .lang-en {
            display: none;
        }
        
        body.lang-en .lang-zh {
            display: none;
        }
        
        .item-code {
            color: #2962ff;
            font-weight: bold;
        }
        
        .bin-code {
            color: #e67e22;
            font-weight: bold;
        }
        
        .quantity {
            color: #27ae60;
            font-weight: bold;
        }
        
        .BT-number {
            color: #9c27b0;
            font-weight: bold;
        }
        
        .box-details {
            font-size: 0.9em;
            margin-left: 20px;
            color: #666;
            display: block;
            margin-top: 5px;
        }
        
        .total-summary {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 15px;
            border-left: 4px solid #4CAF50;
        }
        
        .locations-details {
            margin-top: 15px;
        }
        
        .locations-details h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .item-info {
            flex: 1;
        }
        
        .clear-item-button {
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            font-size: 0.9em;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-left: 10px;
        }
        
        .clear-item-button:hover {
            background-color: #c0392b;
        }
        
        .location-info {
            flex: 1;
        }
        
        .items-details {
            margin-top: 15px;
        }
        
        .items-details h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .location-item {
            margin-left: 20px;
            margin-top: 5px;
            font-size: 0.9em;
            color: #666;
        }

        /* å†å²è®°å½•æ§åˆ¶æ ·å¼ */
        .history-controls {
            margin-bottom: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
            border: 1px solid #e9ecef;
        }

        .date-filter {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .date-filter label {
            font-weight: bold;
            color: #333;
        }

        .date-filter input[type="date"] {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .today-btn {
            background-color: #17a2b8;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .today-btn:hover {
            background-color: #138496;
        }

        .export-controls {
            display: flex;
            gap: 10px;
        }

        .export-btn {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .export-btn:hover {
            background-color: #218838;
        }

        @media (max-width: 768px) {
            .date-filter {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .export-controls {
                flex-direction: column;
            }
        }

        /* å¯¼å‡ºæŒ‰é’®ç»„æ ·å¼ */
        .export-buttons {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            justify-content: center;
        }
        
        .export-button {
            background-color: #2980b9;
            padding: 12px 24px;
            font-size: 1.1em;
            min-width: 200px;
        }
        
        .export-button:hover {
            background-color: #2471a3;
        }

        /* ç§»åŠ¨è®¾å¤‡é€‚é… */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
                max-width: none;
            }
            
            /* è¾“å…¥ç•Œé¢åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„æ ·å¼ */
            #input-tab input {
                width: 100%;
                font-size: 1.4em;
                padding: 15px;
                margin: 5px 0;
            }
            
            #input-tab label {
                display: block;
                width: 100%;
                margin-bottom: 5px;
                font-size: 1.2em;
            }
            
            #input-tab form div {
                margin: 20px 0;
            }
            
            #input-tab button[type="submit"] {
                width: 100%;
                padding: 20px;
                font-size: 1.4em;
                margin-top: 30px;
            }
            
            /* æŸ¥è¯¢ç•Œé¢åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„æ ·å¼ */
            .search-input-group {
                flex-direction: column;
                width: 100%;
            }
            
            .search-input-group input {
                width: 100%;
                font-size: 1.4em;
                padding: 15px;
                margin-bottom: 10px;
            }
            
            .search-input-group button {
                width: 100%;
                padding: 15px;
                font-size: 1.2em;
            }
            
            /* å¯¼å‡ºæŒ‰é’®åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„æ ·å¼ */
            .export-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .export-button {
                width: 100%;
                padding: 20px;
                font-size: 1.3em;
            }
            
            /* è¯­è¨€åˆ‡æ¢æŒ‰é’®åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„æ ·å¼ */
            .language-switch {
                position: relative;
                top: 0;
                right: 0;
                display: flex;
                justify-content: center;
                margin-bottom: 20px;
            }
            
            .language-switch button {
                padding: 10px 20px;
                font-size: 1.2em;
            }
            
            /* æ ‡ç­¾é¡µåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„æ ·å¼ */
            .tab-button {
                font-size: 1.2em;
                padding: 15px;
            }
            
            /* æŸ¥è¯¢ç»“æœåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„æ ·å¼ */
            .result-item {
                font-size: 1.2em;
                padding: 15px;
            }
        }
        
        /* é˜²æ­¢åœ¨ iOS ä¸Šçš„è¾“å…¥æ¡†è‡ªåŠ¨ç¼©æ”¾ */
        @media screen and (-webkit-min-device-pixel-ratio:0) { 
            select,
            textarea,
            input {
                font-size: 16px !important;
            }
        }

        /* è¾“å…¥å†å²è®°å½•æ ·å¼ */
        .input-history {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .history-list {
            max-height: 300px;
            overflow-y: auto;
            background: #f8f9fa;
            border-radius: 5px;
            border: 1px solid #eee;
        }
        
        /* å†å²è®°å½•æ¡ç›®æ ·å¼ - ç½‘æ ¼å¸ƒå±€ */
        .history-item {
            padding: 10px 15px;
            border-bottom: 1px solid #eee;
            background: white;
            display: grid;
            grid-template-columns: 160px 1fr;
            column-gap: 15px;
            row-gap: 4px;
            align-items: start;
        }
        
        .history-item:last-child {
            border-bottom: none;
        }
        
        .history-item .time {
            color: #666;
            font-size: 0.9em;
            white-space: nowrap;
            font-variant-numeric: tabular-nums; /* æ•°å­—ç­‰å®½ï¼Œæ—¶é—´æ›´æ•´é½ */
        }
        
        .history-item .details {
            line-height: 1.45;
        }

        /* è¯­è¨€æ˜¾ç¤ºæ§åˆ¶ï¼ˆå†å²è®°å½•åŒºåŸŸåªæ˜¾ç¤ºå½“å‰è¯­è¨€ï¼‰ */
        body.lang-zh .history-item .details .lang-en { display: none !important; }
        body.lang-en .history-item .details .lang-zh { display: none !important; }

        /* è¯­è¨€å„å ä¸€è¡Œï¼Œé¿å…å†…å®¹æ‹¥æŒ¤å¯¼è‡´é”™ä½ */
        .history-item .details .lang-zh,
        .history-item .details .lang-en {
            display: block;
        }
        

        
        /* ç§»åŠ¨è®¾å¤‡é€‚é… */
        @media (max-width: 768px) {
            .history-item {
                grid-template-columns: 1fr;
                gap: 5px;
            }
            
            .history-item .time {
                margin-bottom: 5px;
            }
        }

        /* ç¡®ä¿æ¯ä¸ªå•†å“æ˜¾ç¤ºåœ¨æ–°è¡Œ */
        .result-item > span {
            display: block;
            margin-bottom: 5px;
        }

        /* æŸ¥è¯¢æ ‡ç­¾é¡µæ ·å¼ */
        .query-tab-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .query-tab-button {
            padding: 10px 20px;
            background-color: #e9ecef;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            cursor: pointer;
            flex: 1;
            min-width: 200px;
            transition: all 0.3s;
            color: #495057;
            font-weight: 500;
        }
        
        .query-tab-button.active {
            background-color: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }
        
        .query-tab-button:hover:not(.active) {
            background-color: #dee2e6;
        }
        
        .query-content {
            display: none;
            padding: 20px;
            background-color: #fff;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .query-content.active {
            display: block;
        }
        
        .result-div {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 4px;
            min-height: 50px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* å†å²è®°å½•æ ·å¼ */
        .full-history-list {
            max-height: calc(100vh - 200px);
            overflow-y: auto;
            background: #f8f9fa;
            border-radius: 5px;
            border: 1px solid #eee;
        }
        
        #recent-history-list {
            max-height: 300px;
        }
        
        .history-item:hover {
            background: #f8f9fa;
        }

        /* ç¡®è®¤å¯¹è¯æ¡† */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border-radius: 8px;
            width: 80%;
            max-width: 500px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .confirm-details {
            margin: 20px 0;
        }
        
        .confirm-row {
            margin: 10px 0;
            display: flex;
            align-items: center;
        }
        
        .confirm-row .label {
            width: 120px;
            color: #666;
        }
        
        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }
        
        .modal-button {
            padding: 8px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
        }
        
        .modal-button.confirm {
            background-color: #4CAF50;
            color: white;
        }
        
        .modal-button.cancel {
            background-color: #f44336;
            color: white;
        }
        
        .modal-button.warning {
            background-color: #ff9800;
            color: white;
        }
        
        .modal-button.success {
            background-color: #4CAF50;
            color: white;
        }
        
        .modal-button:hover {
            opacity: 0.9;
        }

        /* å¯¼å‡ºæ ‡ç­¾é¡µæ ·å¼ */
        .export-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .export-button {
            flex: 1;
            min-width: 200px;
            padding: 15px;
            font-size: 1.1em;
        }
        
        .export-descriptions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        
        .export-description {
            padding: 15px;
            background-color: white;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .export-description h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .export-description p {
            color: #666;
            line-height: 1.5;
        }

        /* åº“ä½æ¸…é™¤æŒ‰é’®æ ·å¼ */
        .bin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .clear-bin-button {
            background-color: #dc3545;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .clear-bin-button:hover {
            background-color: #c82333;
        }

        /* ç¡®è®¤å¯¹è¯æ¡†ä¸­çš„åº“å­˜è¯¦æƒ…æ ·å¼ */
        .inventory-details {
            margin-top: 15px;
            max-height: 300px;
            overflow-y: auto;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
        }
        
        .confirm-item {
            margin-bottom: 15px;
            padding: 10px;
            background: white;
            border-radius: 4px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .confirm-item:last-child {
            margin-bottom: 0;
        }
        
        .confirm-item .item-header {
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px solid #eee;
        }
        
        .confirm-item .box-details {
            margin-left: 15px;
            font-size: 0.9em;
            color: #666;
        }
        
        .confirm-item .box-detail-line {
            margin: 4px 0;
        }
        
        .empty-message {
            text-align: center;
            color: #666;
            padding: 20px;
        }


    </style>
</head>
<body>
    <div class="container">
        <div class="language-switch">
            <button onclick="switchLanguage('zh')">ä¸­æ–‡</button>
            <button onclick="switchLanguage('en')">English</button>
        </div>
        
        <h1 class="lang-zh">åº“å­˜ç›˜ç‚¹ç³»ç»Ÿ</h1>
        <h1 class="lang-en">Inventory System</h1>
        
        <div class="tab-buttons">
            <button class="tab-button active" onclick="switchTab('input')" data-tab="input">
                <span class="lang-zh">åº“å­˜å½•å…¥</span>
                <span class="lang-en">Input</span>
            </button>
            <button class="tab-button" onclick="switchTab('query')" data-tab="query">
                <span class="lang-zh">æœç´¢</span>
                <span class="lang-en">Search</span>
            </button>
            <button class="tab-button" onclick="switchTab('history')" data-tab="history">
                <span class="lang-zh">å†å²è®°å½•</span>
                <span class="lang-en">History</span>
            </button>

            <button class="tab-button" onclick="switchTab('export')" data-tab="export">
                <span class="lang-zh">å¯¼å‡º</span>
                <span class="lang-en">Export</span>
            </button>
        </div>
        
        <!-- ç›˜ç‚¹å½•å…¥æ ‡ç­¾é¡µ -->
        <div id="input-tab" class="tab-content active">
            <div class="input-header">
                <h2>
                    <span class="lang-zh">åº“å­˜å½•å…¥</span>
                    <span class="lang-en">Inventory Input</span>
                </h2>
                <button type="submit" class="submit-button" form="inventoryForm">
                    <span class="lang-zh">æäº¤</span>
                    <span class="lang-en">Submit</span>
                </button>
            </div>
            <form id="inventoryForm">
                <!-- BTä¿¡æ¯éƒ¨åˆ† - å•ç‹¬ä¸€è¡Œ -->
                <div class="input-section container-section">
                    <h3 class="section-title">
                        <span class="lang-zh">ğŸš¢ BTå·</span>
                        <span class="lang-en">ğŸš¢ BT No.</span>
                    </h3>
                    <div>
                        <label>
                            <span class="lang-zh">BTï¼š</span>
                            <span class="lang-en">BT:</span>
                        </label>
                        <input type="text" id="BTInput" required>
                    </div>
                </div>

                <!-- å•†å“ä¿¡æ¯å’Œåº“ä½ä¿¡æ¯å¹¶æ’æ˜¾ç¤º -->
                <div class="input-sections-container">
                    <!-- å•†å“ä¿¡æ¯éƒ¨åˆ† -->
                    <div class="input-section">
                        <h3 class="section-title">
                            <span class="lang-zh">ğŸ“‹ å•†å“ä¿¡æ¯</span>
                            <span class="lang-en">ğŸ“‹ Item Information</span>
                        </h3>
                        <div>
                            <label>
                                <span class="lang-zh">å•†å“ç¼–å·ï¼š</span>
                                <span class="lang-en">Item Code:</span>
                            </label>
                            <input type="text" id="itemInput" required>
                        </div>
                        <div>
                            <label>
                                <span class="lang-zh">ç®±æ•°ï¼š</span>
                                <span class="lang-en">Box Count:</span>
                            </label>
                            <input type="number" 
                                   id="boxCount" 
                                   required 
                                   min="1" 
                                   step="1" 
                                   oninput="this.value = this.value.replace(/[^0-9]/g, ''); if(this.value <= 0) this.value = '';">
                        </div>
                        <div>
                            <label>
                                <span class="lang-zh">æ¯ç®±æ•°é‡ï¼š</span>
                                <span class="lang-en">Pieces per Box:</span>
                            </label>
                            <input type="number" 
                                   id="piecesPerBox" 
                                   required 
                                   min="1" 
                                   step="1" 
                                   oninput="this.value = this.value.replace(/[^0-9]/g, ''); if(this.value <= 0) this.value = '';">
                        </div>
                    </div>

                    <!-- åº“ä½ä¿¡æ¯éƒ¨åˆ† -->
                    <div class="input-section">
                        <h3 class="section-title">
                            <span class="lang-zh">ğŸ“¦ åº“ä½ä¿¡æ¯</span>
                            <span class="lang-en">ğŸ“¦ Bin Information</span>
                        </h3>
                        <div>
                            <label>
                                <span class="lang-zh">åº“ä½ç¼–å·ï¼š</span>
                                <span class="lang-en">Bin Location:</span>
                            </label>
                            <input type="text" id="binInput" required>
                        </div>
                    </div>
                </div>
            </form>
            
            <div class="input-history">
                <h3>
                    <span class="lang-zh">æœ€è¿‘å½•å…¥è®°å½•</span>
                    <span class="lang-en">Recent Input History</span>
                </h3>
                <div id="recent-history-list" class="history-list"></div>
            </div>
        </div>

        <!-- å†å²è®°å½•éƒ¨åˆ† -->
        <div id="history-tab" class="tab-content">
            <h2>
                <span class="lang-zh">è¾“å…¥å†å²è®°å½•</span>
                <span class="lang-en">Input History</span>
            </h2>
            <div class="history-controls">
                <div class="date-filter">
                    <label>
                        <span class="lang-zh">é€‰æ‹©æ—¥æœŸï¼š</span>
                        <span class="lang-en">Select Date:</span>
                    </label>
                    <input type="date" id="historyDate" onchange="filterHistoryByDate()">
                    <button onclick="showTodayHistory()" class="today-btn">
                        <span class="lang-zh">ä»Šå¤©</span>
                        <span class="lang-en">Today</span>
                    </button>
                </div>
                <div class="export-controls">
                    <button onclick="exportHistoryByDate()" class="export-btn">
                        <span class="lang-zh">å¯¼å‡ºé€‰ä¸­æ—¥æœŸ</span>
                        <span class="lang-en">Export Selected Date</span>
                    </button>
                    <button onclick="exportAllHistory()" class="export-btn">
                        <span class="lang-zh">å¯¼å‡ºå…¨éƒ¨è®°å½•</span>
                        <span class="lang-en">Export All Records</span>
                    </button>
                </div>
            </div>
            <div class="full-history-list" id="full-history-list">
                <!-- æ‰€æœ‰å†å²è®°å½•å°†åœ¨è¿™é‡ŒåŠ¨æ€æ˜¾ç¤º -->
            </div>
        </div>



        <!-- å¯¼å‡ºéƒ¨åˆ† -->
        <div id="export-tab" class="tab-content">
            <h2>
                <span class="lang-zh">æ•°æ®å¯¼å‡º</span>
                <span class="lang-en">Data Export</span>
            </h2>
            
            <div class="export-buttons">
                <button onclick="exportItems()" class="export-button">
                    <span class="lang-zh">ğŸ“‹ å¯¼å‡ºå•†å“åº“å­˜</span>
                    <span class="lang-en">ğŸ“‹ Export Items Inventory</span>
                </button>
                <button onclick="exportBins()" class="export-button">
                    <span class="lang-zh">ğŸ“¦ å¯¼å‡ºåº“ä½åº“å­˜</span>
                    <span class="lang-en">ğŸ“¦ Export Bins Inventory</span>
                </button>
                <button onclick="exportItemDetails()" class="export-button">
                    <span class="lang-zh">ğŸ“Š å¯¼å‡ºæ˜ç»†</span>
                    <span class="lang-en">ğŸ“Š Export Details</span>
                </button>
                <button onclick="exportDatabase()" class="export-button">
                    <span class="lang-zh">ğŸ’¾ å¯¼å‡ºæ•°æ®åº“</span>
                    <span class="lang-en">ğŸ’¾ Export Database</span>
                </button>
            </div>
            
            <div class="export-descriptions">
                <div class="export-description">
                    <h3>
                        <span class="lang-zh">ğŸ“‹ å•†å“åº“å­˜</span>
                        <span class="lang-en">ğŸ“‹ Items Inventory</span>
                    </h3>
                    <p>
                        <span class="lang-zh">å¯¼å‡ºæ‰€æœ‰å•†å“çš„æ€»åº“å­˜æ•°é‡å’Œæ‰€åœ¨åº“ä½ä¿¡æ¯ã€‚</span>
                        <span class="lang-en">Export total inventory quantities and locations for all items.</span>
                    </p>
                </div>
                <div class="export-description">
                    <h3>
                        <span class="lang-zh">ğŸ“¦ åº“ä½åº“å­˜</span>
                        <span class="lang-en">ğŸ“¦ Bins Inventory</span>
                    </h3>
                    <p>
                        <span class="lang-zh">å¯¼å‡ºæ‰€æœ‰åº“ä½ä¸­çš„å•†å“æ˜ç»†ã€‚</span>
                        <span class="lang-en">Export detailed inventory for all bin locations.</span>
                    </p>
                </div>
                <div class="export-description">
                    <h3>
                        <span class="lang-zh">ğŸ“Š æ˜ç»†</span>
                        <span class="lang-en">ğŸ“Š Details</span>
                    </h3>
                    <p>
                        <span class="lang-zh">å¯¼å‡ºæ‰€æœ‰å•†å“åœ¨å„åº“ä½çš„è¯¦ç»†ç®±è§„ä¿¡æ¯ã€‚</span>
                        <span class="lang-en">Export detailed box specifications for all items in each location.</span>
                    </p>
                </div>
                <div class="export-description">
                    <h3>
                        <span class="lang-zh">ğŸ’¾ æ•°æ®åº“</span>
                        <span class="lang-en">ğŸ’¾ Database</span>
                    </h3>
                    <p>
                        <span class="lang-zh">å¯¼å‡ºå®Œæ•´çš„æ•°æ®åº“æ–‡ä»¶ï¼Œç”¨äºå¤‡ä»½æˆ–æ•°æ®è¿ç§»ã€‚</span>
                        <span class="lang-en">Export complete database file for backup or data migration.</span>
                    </p>
                </div>
            </div>
        </div>

        <!-- æœç´¢éƒ¨åˆ† -->
        <div id="query-tab" class="tab-content">
            <h2>
                <span class="lang-zh">æœç´¢</span>
                <span class="lang-en">Search</span>
            </h2>
            
            <!-- æŸ¥è¯¢ç±»å‹æ ‡ç­¾é¡µ -->
            <div class="query-tab-buttons">
                <button class="query-tab-button active" onclick="switchQueryTab('bin-contents')" data-tab="bin-contents">
                    <span class="lang-zh">ğŸ“¦ æœç´¢åº“ä½</span>
                    <span class="lang-en">ğŸ“¦ Search Bin</span>
                </button>
                <button class="query-tab-button" onclick="switchQueryTab('container-search')" data-tab="container-search">
                    <span class="lang-zh">ğŸš¢ æœç´¢BT</span>
                    <span class="lang-en">ğŸš¢ Search BT</span>
                </button>
                <button class="query-tab-button" onclick="switchQueryTab('item-total')" data-tab="item-total">
                    <span class="lang-zh">ğŸ“‹ æœç´¢å•†å“</span>
                    <span class="lang-en">ğŸ“‹ Search Item</span>
                </button>
            </div>
            
            <!-- æœç´¢åº“ä½ -->
            <div id="bin-contents-tab" class="query-content active">
                <h3>
                    <span class="lang-zh">ğŸ“¦ æœç´¢åº“ä½</span>
                    <span class="lang-en">ğŸ“¦ Search Bin</span>
                </h3>
                <div class="search-input-group">
                    <input type="text" id="binSearch">
                    <button onclick="searchBinContents()">
                        <span class="lang-zh">æŸ¥è¯¢</span>
                        <span class="lang-en">Search</span>
                    </button>
                </div>
                <div id="binContentsResult" class="result-div"></div>
            </div>

            <!-- æœç´¢BT -->
            <div id="container-search-tab" class="query-content">
                <h3>
                    <span class="lang-zh">ğŸš¢ æœç´¢BT</span>
                    <span class="lang-en">ğŸš¢ Search BT</span>
                </h3>
                <div class="search-input-group">
                    <input type="text" id="BTSearch">
                    <button onclick="searchBT()">
                        <span class="lang-zh">æœç´¢</span>
                        <span class="lang-en">Search</span>
                    </button>
                </div>
                <div id="BTSearchResult" class="result-div"></div>
            </div>

            <!-- æœç´¢å•†å“ -->
            <div id="item-total-tab" class="query-content">
                <h3>
                    <span class="lang-zh">ğŸ“‹ æœç´¢å•†å“æ€»æ•°é‡å’Œæ‰€åœ¨åº“ä½</span>
                    <span class="lang-en">ğŸ“‹ Search Item Total Quantity and Locations</span>
                </h3>
                <div class="search-input-group">
                    <input type="text" id="itemSearch">
                    <button onclick="searchItemTotal()">
                        <span class="lang-zh">æŸ¥è¯¢</span>
                        <span class="lang-en">Search</span>
                    </button>
                </div>
                <div id="itemTotalResult" class="result-div"></div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="inventory.js"></script>
    <script>
        // è¯­è¨€åˆ‡æ¢åŠŸèƒ½
        function switchLanguage(lang) {
            document.body.className = 'lang-' + lang;
            localStorage.setItem('preferred-language', lang);
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            $('.language-switch button').removeClass('active');
            $(`.language-switch button[onclick="switchLanguage('${lang}')"]`).addClass('active');
            // æ›´æ–°æœç´¢æ¡†å ä½ç¬¦
            if (typeof updateSearchPlaceholders === 'function') {
                updateSearchPlaceholders(lang);
            }
        }
        
        // æ ‡ç­¾é¡µåˆ‡æ¢åŠŸèƒ½
        function switchTab(tabId) {
            $('.tab-content').removeClass('active');
            $('.tab-button').removeClass('active');
            $(`#${tabId}-tab`).addClass('active');
            $(`.tab-button[data-tab="${tabId}"]`).addClass('active');
        }
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–è¯­è¨€
            const lang = localStorage.getItem('preferred-language') || 'zh';
            switchLanguage(lang);
            
            // åˆå§‹åŒ–æ ‡ç­¾é¡µ
            switchTab('input');
            
            // ç»™è¯­è¨€åˆ‡æ¢æŒ‰é’®æ·»åŠ æ¿€æ´»çŠ¶æ€
            $(`.language-switch button[onclick="switchLanguage('${lang}')"]`).addClass('active');
        });
    </script>

    <!-- ç¡®è®¤å¯¹è¯æ¡† -->
    <div id="confirm-dialog" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>
                <span class="lang-zh">è¯·ç¡®è®¤è¾“å…¥ä¿¡æ¯</span>
                <span class="lang-en">Please Confirm Input</span>
            </h3>
            <div class="confirm-details">
                <div class="confirm-row">
                    <span class="label">
                        <span class="lang-zh">åº“ä½ï¼š</span>
                        <span class="lang-en">Bin:</span>
                    </span>
                    <span id="confirm-bin" class="bin-code"></span>
                </div>
                <div class="confirm-row">
                    <span class="label">
                        <span class="lang-zh">å•†å“ï¼š</span>
                        <span class="lang-en">Item:</span>
                    </span>
                    <span id="confirm-item" class="item-code"></span>
                </div>
                <div class="confirm-row">
                    <span class="label">
                        <span class="lang-zh">ç®±æ•°ï¼š</span>
                        <span class="lang-en">Box Count:</span>
                    </span>
                    <span id="confirm-box-count" class="quantity"></span>
                </div>
                <div class="confirm-row">
                    <span class="label">
                        <span class="lang-zh">æ¯ç®±æ•°é‡ï¼š</span>
                        <span class="lang-en">Pieces per Box:</span>
                    </span>
                    <span id="confirm-pieces" class="quantity"></span>
                </div>
            </div>
            <div class="modal-buttons">
                <button id="confirm-yes" class="modal-button confirm">
                    <span class="lang-zh">ç¡®è®¤</span>
                    <span class="lang-en">Confirm</span>
                </button>
                <button id="confirm-middle" class="modal-button warning" style="display: none;">
                    <span class="lang-zh">æ¸…ç©ºåº“ä½åæ·»åŠ </span>
                    <span class="lang-en">Clear and Add</span>
                </button>
                <button id="confirm-no" class="modal-button cancel">
                    <span class="lang-zh">å–æ¶ˆ</span>
                    <span class="lang-en">Cancel</span>
                </button>
            </div>
        </div>
    </div>
</body>
</html> 